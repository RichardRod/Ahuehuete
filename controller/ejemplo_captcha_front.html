<html>
<head>
    <title>Ejemplo</title>
    <script
            src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8="
            crossorigin="anonymous"></script>

    <script src="https://www.google.com/recaptcha/api.js?render=6Lel1TkcAAAAAOCauv71nAhuRcDbHekq8aPtG5vt"></script>
</head>
<body>
<h1>
    Formulario de registro
</h1>

<form id="form" action="ejemplo_captcha.php" method="post">
    <input type="email" id="email" name="email">
    <input type="submit" value="submit">
</form>


<script>
    $('#form').submit(function(event) {
        event.preventDefault();
        grecaptcha.ready(function() {
            grecaptcha.execute('6Lel1TkcAAAAAOCauv71nAhuRcDbHekq8aPtG5vt', {action: 'registro'}).then(function(token) {
                $('#form').prepend('<input type="hidden" name="token" value="' + token + '">');
                $('#form').prepend('<input type="hidden" name="action" value="registro">');
                $('#form').unbind('submit').submit();
            });
        });
    });
</script>
</body>
</html>